{"version":3,"file":"component---src-pages-media-js-7300be742f2ec962d5db.js","mappings":"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","sources":["webpack://gatsby-starter-default/./src/components/ani-block.js","webpack://gatsby-starter-default/./src/components/ani-text.js","webpack://gatsby-starter-default/./src/components/media-list.module.sass","webpack://gatsby-starter-default/./src/components/media-list.js","webpack://gatsby-starter-default/./src/components/media-player.js","webpack://gatsby-starter-default/./src/pages/media.js","webpack://gatsby-starter-default/./node_modules/framer-motion/dist/es/utils/use-is-mounted.mjs","webpack://gatsby-starter-default/./node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.mjs","webpack://gatsby-starter-default/./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs","webpack://gatsby-starter-default/./node_modules/framer-motion/dist/es/utils/use-force-update.mjs"],"sourcesContent":["import React from \"react\"\nimport { motion } from \"framer-motion\"\n\nconst AniBlock = ({children, delay = 0, ...rest}) => {\n    return (\n        <div data-sal=\"slide-up\" {...rest}>\n            {children}\n        </div>\n\n    )\n}\n\nexport default AniBlock","import React from \"react\"\nimport { motion } from \"framer-motion\"\n\nconst AniText = ({text = \"\", variants = {}, containerVariants = {}, delay = 0, ...rest}) => {\n    if (!Object.keys(variants).length) variants = DEFAULT_VARIANTS;\n    if (!Object.keys(containerVariants).length) containerVariants = DEFAULT_CONTAINER;\n\n    return (\n        // Letter scroll effect\n        // <motion.div \n        //     key={text}\n        //     custom={delay}\n        //     variants={containerVariants}\n        //     initial=\"initial\"\n        //     animate=\"animate\"\n        //     style={{overflow: `hidden`, position: `relative`}}\n        //     {...rest}>\n        //     {[...text].map( (letter, i) =>  (\n        //         <motion.span\n        //             style={{display: `inline-block`}}\n        //             custom={0.1 * i + delay}\n        //             initial=\"initial\"\n        //             animate=\"animate\"\n        //             exit=\"exit\"\n        //             variants={variants}\n        //         >\n        //             {letter}\n        //         </motion.span>\n        //     ))}\n        // </motion.div>\n\n        <div style={{overflow: \"hidden\"}} {...rest}>\n            <motion.div \n                key={text}\n                custom={delay}\n                variants={variants}\n                initial=\"initial\"\n                animate=\"animate\"\n            >\n                {text}\n            </motion.div>\n        </div>\n\n    )\n}\n\nconst DEFAULT_CONTAINER = {\n    initial: {\n        opacity: 0\n    },\n    animate: i => ({\n        opacity: 1,\n        transition: {\n            duration: 1.2,\n            delay: i\n        }\n    }),\n\n}\n\nconst DEFAULT_VARIANTS = {\n    animate: delay => ({\n        y: 0,\n        opacity: 1,\n        transition: {\n            delay: delay,\n            // y: {type:\"ease\", ease: \"easeOut\", duration: .5},\n            y: { type: \"spring\", stiffness: 50, bounce: 1, mass: 1.1, duration: 1},\n            default: { duration: .8},\n        }\n    }),\n    initial: {\n        opacity: 0,\n        y: \".8em\"\n    }\n}\n\n\n// For letter swiping\n// const DEFAULT_VARIANTS = {\n//     animate: i => ({\n//         y: 0,\n//         transition: {\n//             type: \"spring\",\n//             delay: i,\n//             duration: .8,\n//         }\n//     }),\n//     initial: {\n//         y: 300\n//     }\n// }\n\nexport default AniText","// extracted by mini-css-extract-plugin\nexport var active = \"media-list-module--active--bf25d\";\nexport var composer = \"media-list-module--composer--47d61\";\nexport var info = \"media-list-module--info--af1a8\";\nexport var movement = \"media-list-module--movement--c0e54\";\nexport var playerSubtitle = \"media-list-module--player-subtitle--92128\";\nexport var playerTitle = \"media-list-module--player-title--22157\";\nexport var playerVideo = \"media-list-module--player-video--33662\";\nexport var videoItem = \"media-list-module--video-item--99a06\";\nexport var videosList = \"media-list-module--videos-list--e4696\";\nexport var videosListTitle = \"media-list-module--videos-list-title--1bc7f\";\nexport var work = \"media-list-module--work--a681e\";","import React from \"react\"\nimport { Link } from \"gatsby\"\nimport * as mediaStyles from \"./media-list.module.sass\"\n\nconst MediaList = ({videos, setActive, activeIndex}) => {\n    return (\n    <>\n    <h4 className={mediaStyles.videosListTitle}>Videos</h4>\n    <div className={mediaStyles.videosList}>\n        {\n            videos.map( (video, index) => (\n                <div className={`${mediaStyles.videoItem} ${ index==activeIndex ? mediaStyles.active : \"\"}`}\n                    onClick={ () => setActive(index)}>\n                    <div className={mediaStyles.composer}>{video.composer}</div>\n                    <div className={mediaStyles.work}>{video.work}</div>\n                    <div className={mediaStyles.movement}>{video.movement}</div>\n                    <div className={mediaStyles.info}>{video.info}</div>\n                </div>\n            ))\n        }\n    </div>\n    </>\n)\n}\n\nexport default MediaList","import React from \"react\"\nimport { Link } from \"gatsby\"\nimport AniText from \"./ani-text\"\nimport AniBlock from \"./ani-block\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport * as mediaStyles from \"./media-list.module.sass\"\n\n// Send a video NODE into props\nconst MediaPlayer = ({video}) => (\n    <>\n        <AniText className={mediaStyles.playerTitle} text={video.composer} />\n        <div className={mediaStyles.playerSubtitle}>\n            <AniText className={mediaStyles.work} text={video.work} />\n            <AniText className={mediaStyles.movement} text={video.movement} />\n            <AniText className={mediaStyles.info} text={video.info} />\n        </div>\n        <AnimatePresence>\n            <motion.div \n                className={mediaStyles.playerVideo}\n                key={`${video.composer}-video`}\n                initial={{ opacity: 0, scaleX: 0.8 }}\n                animate={{ \n                    opacity: 1,\n                    scaleX: 1,\n                    transition: {\n                        opacity: {duration: 1},\n                        default: {duration: 0.5}\n                    }\n                }}\n                exit={{ opacity: 0, scaleX: 1.05 }}\n                transition={{ duration: 0.5, type:\"easeOut\"}}\n            >\n                <iframe id=\"ytplayer\" type=\"text/html\" height=\"100%\" width=\"100%\"\n                    src={video.link} frameborder=\"0\"></iframe>\n            </motion.div>\n        </AnimatePresence>\n    </>\n)\n\nexport default MediaPlayer","import React, { useState } from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport MediaList from \"../components/media-list\"\nimport MediaPlayer from \"../components/media-player\"\n\nconst MediaPage = ({data}) => {\n    // State variable for active video\n    const [activeIndex, setActiveIndex] = useState(0);\n\n    return (\n        <Layout grid>\n            <MediaPlayer video={data.allVideosYaml.nodes[activeIndex]} />\n            <MediaList \n                videos={data.allVideosYaml.nodes}\n                setActive={setActiveIndex}\n                activeIndex={activeIndex}\n            />\n        </Layout>\n    )\n}\n\n// Gatsby takes one \"query\" export and passes it as {data} into page\nexport const query = graphql`\n    query {\n        allVideosYaml {\n            nodes {\n                composer\n                link\n                work\n                movement\n                info\n            }\n        }\n    }\n`\n\nexport default MediaPage","import { useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-effect.mjs';\n\nfunction useIsMounted() {\n    var isMounted = useRef(false);\n    useIsomorphicLayoutEffect(function () {\n        isMounted.current = true;\n        return function () {\n            isMounted.current = false;\n        };\n    }, []);\n    return isMounted;\n}\n\nexport { useIsMounted };\n","import { __values } from 'tslib';\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { useId } from '../../utils/use-id.mjs';\n\nvar PresenceChild = function (_a) {\n    var children = _a.children, initial = _a.initial, isPresent = _a.isPresent, onExitComplete = _a.onExitComplete, custom = _a.custom, presenceAffectsLayout = _a.presenceAffectsLayout;\n    var presenceChildren = useConstant(newChildrenMap);\n    var id = useId();\n    var context = useMemo(function () { return ({\n        id: id,\n        initial: initial,\n        isPresent: isPresent,\n        custom: custom,\n        onExitComplete: function (childId) {\n            var e_1, _a;\n            presenceChildren.set(childId, true);\n            try {\n                for (var _b = __values(presenceChildren.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var isComplete = _c.value;\n                    if (!isComplete)\n                        return; // can stop searching when any is incomplete\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete();\n        },\n        register: function (childId) {\n            presenceChildren.set(childId, false);\n            return function () { return presenceChildren.delete(childId); };\n        },\n    }); }, \n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    presenceAffectsLayout ? undefined : [isPresent]);\n    useMemo(function () {\n        presenceChildren.forEach(function (_, key) { return presenceChildren.set(key, false); });\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(function () {\n        !isPresent && !presenceChildren.size && (onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete());\n    }, [isPresent]);\n    return (React.createElement(PresenceContext.Provider, { value: context }, children));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n","import { __read, __spreadArray } from 'tslib';\nimport * as React from 'react';\nimport { useContext, useRef, cloneElement, Children, isValidElement } from 'react';\nimport { env } from '../../utils/process.mjs';\nimport { useForceUpdate } from '../../utils/use-force-update.mjs';\nimport { useIsMounted } from '../../utils/use-is-mounted.mjs';\nimport { PresenceChild } from './PresenceChild.mjs';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { useUnmountEffect } from '../../utils/use-unmount-effect.mjs';\n\nvar getChildKey = function (child) { return child.key || \"\"; };\nfunction updateChildLookup(children, allChildren) {\n    children.forEach(function (child) {\n        var key = getChildKey(child);\n        allChildren.set(key, child);\n    });\n}\nfunction onlyElements(children) {\n    var filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, function (child) {\n        if (isValidElement(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nvar AnimatePresence = function (_a) {\n    var children = _a.children, custom = _a.custom, _b = _a.initial, initial = _b === void 0 ? true : _b, onExitComplete = _a.onExitComplete, exitBeforeEnter = _a.exitBeforeEnter, _c = _a.presenceAffectsLayout, presenceAffectsLayout = _c === void 0 ? true : _c;\n    // We want to force a re-render once all exiting animations have finished. We\n    // either use a local forceRender function, or one from a parent context if it exists.\n    var _d = __read(useForceUpdate(), 1), forceRender = _d[0];\n    var forceRenderLayoutGroup = useContext(LayoutGroupContext).forceRender;\n    if (forceRenderLayoutGroup)\n        forceRender = forceRenderLayoutGroup;\n    var isMounted = useIsMounted();\n    // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n    var filteredChildren = onlyElements(children);\n    var childrenToRender = filteredChildren;\n    var exiting = new Set();\n    // Keep a living record of the children we're actually rendering so we\n    // can diff to figure out which are entering and exiting\n    var presentChildren = useRef(childrenToRender);\n    // A lookup table to quickly reference components by key\n    var allChildren = useRef(new Map()).current;\n    // If this is the initial component render, just deal with logic surrounding whether\n    // we play onMount animations or not.\n    var isInitialRender = useRef(true);\n    useIsomorphicLayoutEffect(function () {\n        isInitialRender.current = false;\n        updateChildLookup(filteredChildren, allChildren);\n        presentChildren.current = childrenToRender;\n    });\n    useUnmountEffect(function () {\n        isInitialRender.current = true;\n        allChildren.clear();\n        exiting.clear();\n    });\n    if (isInitialRender.current) {\n        return (React.createElement(React.Fragment, null, childrenToRender.map(function (child) { return (React.createElement(PresenceChild, { key: getChildKey(child), isPresent: true, initial: initial ? undefined : false, presenceAffectsLayout: presenceAffectsLayout }, child)); })));\n    }\n    // If this is a subsequent render, deal with entering and exiting children\n    childrenToRender = __spreadArray([], __read(childrenToRender), false);\n    // Diff the keys of the currently-present and target children to update our\n    // exiting list.\n    var presentKeys = presentChildren.current.map(getChildKey);\n    var targetKeys = filteredChildren.map(getChildKey);\n    // Diff the present children with our target children and mark those that are exiting\n    var numPresent = presentKeys.length;\n    for (var i = 0; i < numPresent; i++) {\n        var key = presentKeys[i];\n        if (targetKeys.indexOf(key) === -1) {\n            exiting.add(key);\n        }\n    }\n    // If we currently have exiting children, and we're deferring rendering incoming children\n    // until after all current children have exiting, empty the childrenToRender array\n    if (exitBeforeEnter && exiting.size) {\n        childrenToRender = [];\n    }\n    // Loop through all currently exiting components and clone them to overwrite `animate`\n    // with any `exit` prop they might have defined.\n    exiting.forEach(function (key) {\n        // If this component is actually entering again, early return\n        if (targetKeys.indexOf(key) !== -1)\n            return;\n        var child = allChildren.get(key);\n        if (!child)\n            return;\n        var insertionIndex = presentKeys.indexOf(key);\n        var onExit = function () {\n            allChildren.delete(key);\n            exiting.delete(key);\n            // Remove this child from the present children\n            var removeIndex = presentChildren.current.findIndex(function (presentChild) { return presentChild.key === key; });\n            presentChildren.current.splice(removeIndex, 1);\n            // Defer re-rendering until all exiting children have indeed left\n            if (!exiting.size) {\n                presentChildren.current = filteredChildren;\n                if (isMounted.current === false)\n                    return;\n                forceRender();\n                onExitComplete && onExitComplete();\n            }\n        };\n        childrenToRender.splice(insertionIndex, 0, React.createElement(PresenceChild, { key: getChildKey(child), isPresent: false, onExitComplete: onExit, custom: custom, presenceAffectsLayout: presenceAffectsLayout }, child));\n    });\n    // Add `MotionContext` even to children that don't need it to ensure we're rendering\n    // the same tree between renders\n    childrenToRender = childrenToRender.map(function (child) {\n        var key = child.key;\n        return exiting.has(key) ? (child) : (React.createElement(PresenceChild, { key: getChildKey(child), isPresent: true, presenceAffectsLayout: presenceAffectsLayout }, child));\n    });\n    if (env !== \"production\" &&\n        exitBeforeEnter &&\n        childrenToRender.length > 1) {\n        console.warn(\"You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour.\");\n    }\n    return (React.createElement(React.Fragment, null, exiting.size\n        ? childrenToRender\n        : childrenToRender.map(function (child) { return cloneElement(child); })));\n};\n\nexport { AnimatePresence };\n","import { __read } from 'tslib';\nimport sync from 'framesync';\nimport { useState, useCallback } from 'react';\nimport { useIsMounted } from './use-is-mounted.mjs';\n\nfunction useForceUpdate() {\n    var isMounted = useIsMounted();\n    var _a = __read(useState(0), 2), forcedRenderCount = _a[0], setForcedRenderCount = _a[1];\n    var forceRender = useCallback(function () {\n        isMounted.current && setForcedRenderCount(forcedRenderCount + 1);\n    }, [forcedRenderCount]);\n    /**\n     * Defer this to the end of the next animation frame in case there are multiple\n     * synchronous calls.\n     */\n    var deferredForceRender = useCallback(function () { return sync.postRender(forceRender); }, [forceRender]);\n    return [deferredForceRender, forcedRenderCount];\n}\n\nexport { useForceUpdate };\n"],"names":["_ref","children","delay","rest","React","Object","assign","DEFAULT_CONTAINER","initial","opacity","animate","i","transition","duration","DEFAULT_VARIANTS","y","type","stiffness","bounce","mass","default","text","variants","containerVariants","keys","length","style","overflow","motion","div","key","custom","info","movement","work","videos","setActive","activeIndex","className","map","video","index","onClick","composer","mediaStyles","AniText","AnimatePresence","scaleX","exit","id","height","width","src","link","frameborder","data","setActiveIndex","useState","Layout","grid","MediaPlayer","allVideosYaml","nodes","MediaList","useIsMounted","isMounted","useRef","current","PresenceChild","_a","isPresent","onExitComplete","presenceAffectsLayout","presenceChildren","newChildrenMap","context","useMemo","childId","e_1","set","_b","values","_c","next","done","value","e_1_1","error","return","call","register","delete","undefined","forEach","_","size","PresenceContext","Provider","Map","getChildKey","child","exitBeforeEnter","_d","forcedRenderCount","setForcedRenderCount","forceRender","useCallback","postRender","useForceUpdate","forceRenderLayoutGroup","useContext","LayoutGroupContext","filteredChildren","filtered","Children","isValidElement","push","onlyElements","childrenToRender","exiting","Set","presentChildren","allChildren","isInitialRender","updateChildLookup","clear","presentKeys","targetKeys","numPresent","indexOf","add","get","insertionIndex","splice","removeIndex","findIndex","presentChild","has","console","warn","cloneElement"],"sourceRoot":""}